{% extends 'base.html.twig' %}

{% block body %}
    <h1>Modifier une sortie</h1>

    {{ form_start(SortieForm) }}

    <div class="container-fluid">
        <div class="row">
            <div class="col-6">
                <div class="row">
                    <div class="col-5">
                        {{ form_label(SortieForm.nom) }}
                    </div>
                    <div class="col-5">
                        {{ form_widget(SortieForm.nom) }}
                        {{ form_errors(SortieForm.nom) }}
                    </div>
                </div>
            </div>
            <div class="col-6">
                <div class="row">
                    <div class="col-5">
                        {{ form_label(SortieForm.datedebut) }}
                    </div>
                    <div class="col-5">
                        {{ form_widget(SortieForm.datedebut) }}
                        {{ form_errors(SortieForm.datedebut) }}
                    </div>
                </div>
            </div>
        </div>
        <div class="row">
            <div class="col-6">
                <div class="row">
                    <div class="col-5">
                        {{ form_label(SortieForm.duree) }}
                    </div>
                    <div class="col-5">
                        {{ form_widget(SortieForm.duree) }}
                        {{ form_errors(SortieForm.duree) }}
                    </div>
                </div>
            </div>
            <div class="col-6">
                <div class="row">
                    <div class="col-5">
                        {{ form_label(SortieForm.datecloture) }}
                    </div>
                    <div class="col-5">
                        {{ form_widget(SortieForm.datecloture) }}
                        {{ form_errors(SortieForm.datecloture) }}
                    </div>
                </div>
            </div>
        </div>
        <div class="row">
            <div class="col-6">
                <div class="row">
                    <div class="col-5">
                        {{ form_label(SortieForm.nbinscriptionsmax) }}
                    </div>
                    <div class="col-5">
                        {{ form_widget(SortieForm.nbinscriptionsmax) }}
                        {{ form_errors(SortieForm.nbinscriptionsmax) }}
                    </div>
                </div>
            </div>
            <div class="col-6">
                <div class="row">
                    <div class="col-5">
                        {{ form_label(SortieForm.descriptioninfos) }}
                    </div>
                    <div class="col-5">
                        {{ form_widget(SortieForm.descriptioninfos) }}
                        {{ form_errors(SortieForm.descriptioninfos) }}
                    </div>
                </div>
            </div>
        </div>
        <input type="hidden" id="pathajax" value="{{ path('ajax_sortie') }}"/>
        <div class="row">
            <div class="col-6">
                <div class="row">
                    <div class="col-5">
                        {#                        {{ form_label(SortieForm.siteSortie) }}#}
                        <label>Villes :</label>
                    </div>
                    <div class="col-5">
                        <select id="sortie_siteSortie" class="villeclass">
                            {% for ville in AllVille %}
                                <option value="{{ ville.noVille }}">{{ ville.nomVille }}</option>
                            {% endfor %}
                        </select>
                    </div>
                </div>
            </div>
        </div>
        <div class="row">
            <div class="col-6">
                <div class="row">
                    <div class="col-5">
                        {{ form_label(SortieForm.urlphoto) }}
                    </div>
                    <div class="col-5">
                        {{ form_widget(SortieForm.urlphoto) }}
                        {{ form_errors(SortieForm.urlphoto) }}
                    </div>
                </div>
            </div>
            <div class="col-6">
                <div class="row">
                    <div class="col-5">
                        {{ form_label(SortieForm.lieuSortie) }}
                    </div>
                    <div class="col-5">
                        {{ form_widget(SortieForm.lieuSortie) }}
                        {{ form_errors(SortieForm.lieuSortie) }}
                    </div>
                    <div class="col-1" style="padding-left: 0px;">
                        <button type="button" class="btn btn-primary" data-toggle="modal" data-target="#LieuModal">+
                        </button>
                    </div>
                </div>
            </div>
        </div>
        <div class="row">
            <div class="col-3">
                <button type="submit" name='btn_enregistrer' value="enregistrer">Enregistrer</button>
            </div>
            <div class="col-3">
                <button type="submit" name="btn_publier" value="publier">Publier la sortie</button>
            </div>
            <div class="col-3">
                <button name="btn_supprimer" value="supprimer" class="btnsupp"><a href="{{ path('detail_sortie', {'id': sortie.noSortie}) }}" >Supprimer la sortie</a></button>
            </div>
            <div class="col-3">
                <button type="reset">Annuler</button>
            </div>
        </div>
        {{ form_end(SortieForm) }}
    </div>
    <div class="modal fade" id="LieuModal" tabindex="-1" role="dialog" aria-labelledby="LieuModalLabel"
         aria-hidden="true">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="LieuModalLabel">Nouveau Lieu</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    {{ form_start(LieuxForm) }}
                    <div class="row">
                        <div class="col-5">
                            {{ form_label(LieuxForm.nomLieu) }}
                        </div>
                        <div class="col-5">
                            {{ form_widget(LieuxForm.nomLieu) }}
                            {{ form_errors(LieuxForm.nomLieu) }}
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-5">
                            {{ form_label(LieuxForm.rue) }}
                        </div>
                        <div class="col-5">
                            {{ form_widget(LieuxForm.rue) }}
                            {{ form_errors(LieuxForm.rue) }}
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-5">
                            {{ form_label(LieuxForm.latitude) }}
                        </div>
                        <div class="col-5">
                            {{ form_widget(LieuxForm.latitude) }}
                            {{ form_errors(LieuxForm.latitude) }}
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-5">
                            {{ form_label(LieuxForm.longitude) }}
                        </div>
                        <div class="col-5">
                            {{ form_widget(LieuxForm.longitude) }}
                            {{ form_errors(LieuxForm.longitude) }}
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-5">
                            {{ form_label(LieuxForm.villeLieu) }}
                        </div>
                        <div class="col-5">
                            {{ form_widget(LieuxForm.villeLieu) }}
                            {{ form_errors(LieuxForm.villeLieu) }}
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-dismiss="modal" value="Fermer">Fermer</button>
                    <button type="submit" class="btn btn-primary" value="Ajouter" name='btn_ajouter'>Ajouter</button>
                </div>
            </div>
            {{ form_end(LieuxForm) }}
        </div>
    </div>
{% endblock %}

{% block javascripts %}
    <script type="text/javascript" src="{{ asset('js/ajax_request.js') }}"></script>

    <script>
        $('#LieuModal').on('shown.bs.modal', function () {
            $('#myInput').trigger('focus')
        });
    </script>
{% endblock %}